

<%- include('includes/header') %> 
<%- include('includes/flash') %>

<div style="display: flex;flex-wrap: wrap;">
  <div class="col-lg"></div>
  <div class="col-lg-7" >

    <h5 class="bolder text-primary pt-1 text-center"><strong>Batch Details (<%=batchDetails.batchSessionYear%>)</strong></h5>
    <div class="single-batch-container">
      <div class="single-batch-data pb-4">
        <div style="position: relative;">
          <img class="single-batch-image"  src="/images/sponsor-banner2.png" alt="">
          <div class="text-success text-center"><strong>Department Name : <%=batchDetails.departmentName%></strong></div>
        </div>
        <hr>
            <div class="container">
              <h5><strong>Department :</strong></h5>
              <ul class="list-group">
                  <li class="list-group-item list-group-item-action d-flex align-items-center justify-content-between">
                    <div>
                      <span class="d-block"><strong>Departmet Name : <%=batchDetails.departmentName%></strong></span>
                      <span class="d-block"><strong>Course Duration : (data didn't taken)</strong>Years</span>  
                    </div>
                    <div>
                      <a href="/department/<%=batchDetails.batchId.slice(4,9)%>/details"  class="btn btn-primary btn-sm">Department Details</a>
                    </div>
                  </li>
              </ul>
            </div>
          <%if(batchDetails.isVoteGoingOn){%>
            <hr>
            <div class="ml-2 mr-2 mb-1">
              <h5><strong>New Leader Selection :</strong></h5>
              <div class="container">
                <div class="student-room-container" style="width: 100%;">
                  <strong  class="d-block text-info">Created Date : <%=batchDetails.leaderVotingData.votingDates.createdDate%></strong> 
                  <strong  class="d-block text-info">Nomination Last Date : <%=batchDetails.leaderVotingData.votingDates.nominationLastDate%></strong>
                  <strong  class="d-block text-info">Voting Last Date : <%=batchDetails.leaderVotingData.votingDates.votingLastDate%></strong>
                  <%if(batchDetails.leaderVotingData.votingDates.resultDate){%>
                    <hr>
                    <h6 class="text-warning"><strong>Result has published :</strong></h6>
                    <strong  class="d-block text-info">Won Leader : <%=batchDetails.leaderVotingData.wonLeader.userName%></strong> 
                    <strong  class="d-block text-info">Result Date : <%=batchDetails.leaderVotingData.votingDates.resultDate%></strong>
                    <%if(batchDetails.leaderVotingData.wonLeader.regNumber==user.regNumber){%>
                      <strong  class="d-block text-warning">Congrats!! You have won the election.Accept yourself as a leader.</strong>
                    <%}else{%>
                      <strong  class="d-block text-warning">New Leader will be added when he will accept his winning.</strong>
                    <%}%>
                  <%}%>
                  <a href="/leader-voting/<%=batchDetails.leaderVotingData.votingPoleId%>/details" class="btn btn-sm btn-block btn-primary">Go to the voting page</a>
                </div>
              </div> 
            </div>
            <hr>
          <%}else{%>
            <%if(checkData.isBatchLeader){%>
            <hr>
            <div class="ml-2 mr-2 mb-1">
              <h5><strong>New Leader Selection :</strong></h5>
              <h6 class="text-warning"><strong>Present leader activation date : </strong><%=batchDetails.presentLeader.createdDate%></h6>
              <h6 class="text-danger">[This section will only work/shown after 15 days of present leader selection.]</h6>
              <div class="container">
                <div class="student-room-container" style="width: 100%;">
                  <form action="/create/batch/<%=batchDetails.batchId%>/leader-voting-pole" method="post">
                    <button class="btn  btn-info btn-sm btn-block">Create New Leader Selection Pole</button>
                  </form>
                </div>
              </div> 
            </div>
            <hr>
            <%}%>
          <%}%>

        <h4 class="text-center text-success"><strong>Leader Board</strong> </h4>
        <hr>
        <div class="ml-2 mr-2 mb-1">
          <h5><strong>Activities :</strong></h5>
          <div class="container">
            <%if(!batchDetails.presentActivity){%>
              <%if(checkData.isPresentLeader || checkData.isPreviousLeader){%>
              <a href="/activity/batch/<%=batchDetails.batchId%>/create" class="btn btn-block btn-primary btn-lg">
                Create New Batch Activity
              </a>
              <%}else{%>
                <div class="btn btn-info btn-sm btn-block mr-1">There is no present activity!</div>
              <%}%>
            <%}else{%>
              <div class="student-room-container" >
                <%if(batchDetails.presentActivity.isTopicByVote && !batchDetails.presentActivity.isVoteCompleted){%>
                  <div style="width: 100%;">
                    <strong  class="d-block text-info text-center">Topic for next activity is going to be selected by voting.Please give your vote.</strong>
                  </div>
                <%}else{%>
                  <div style="width: 100%;">
                    <strong  class="d-block text-info">Running activity -</strong>
                    <strong class="d-block">Topic : <%=batchDetails.presentActivity.topic%></strong>
                    <strong class="d-block">Title : <%=batchDetails.presentActivity.title%></strong>
                  </div>  
                <%}%>  
                <a href="/activity/<%=batchDetails.presentActivity.activityId%>/details">
                  <div class="btn btn-success btn-sm btn-block mr-1">Go to activity details</div>
                </a>    
              </div>
            <%}%>
          </div>
          <hr>
          <div class="container">
            <%if(!batchDetails.previousActivity){%>
              <div class="btn btn-info btn-lg btn-block mr-1">There is no previous activity!</div>
            <%}else{%>
              <div class="student-room-container" >
                  <div style="width: 100%;">
                    <strong  class="d-block text-info">Previous activity -</strong>
                    <strong class="d-block">Topic : <%=batchDetails.previousActivity.topic%></strong>
                    <strong class="d-block">Title : <%=batchDetails.previousActivity.title%></strong>
                    <strong class="d-block">Activity Date : <i>12/12/12</i></strong>
                    <strong class="d-block">Published Date : <i>12/12/12</i></strong>
                  </div>  
                  <a href="/activity/<%=batchDetails.previousActivity._id%>/details">
                    <div class="btn btn-success btn-sm btn-block mr-1">Go to activity details</div>
                  </a>    
              </div>
            <%}%>
          </div>
          <%if(batchDetails.completedActivities){%>
            <hr>
            <div class="container">
              <h6 class="text-info"><strong>Completed Activities :</strong></h6>
              <%batchDetails.completedActivities.forEach((activityId,index)=>{%>
                <a href="/activity/<%=activityId%>/details">
                  <div class="btn btn-outline-success btn-block btn-sm"><strong>Activity Number : <%=index+1%></strong> </div>
                </a>
              <%})%>
            </div>
          <%}%>
        </div>
        <hr>
        <div class="ml-2 mr-2 mb-1">
          <h5><strong>Present Leader :</strong></h5>
          <%if(batchDetails.presentLeader){%>
            
          <div class="student-room-container" style="display: flex;width: 100%;">
            <div class="mr-2" >
              <img class="avatar-small" style="top:2px ;margin-left: 0rem;margin-right: 2px;" src="" alt="">
            </div>
            <div class="row"  style="width: 100%;">
              <div class="col-sm-6"  style="width: 100%;display: flex;">
                <div style="width: 100%;">
                  <strong class="d-block">Name : <%=batchDetails.presentLeader.userName%></strong>
                  <strong class="d-block">Phone Number : <%=batchDetails.presentLeader.phone%></strong>
                  <a href="/leader-voting/<%=batchDetails.presentLeader.votingPoleId%>/details">
                    <strong>Go to voting details...</strong>
                  </a>
                </div>
              </div>
              <div class="col-sm-6 " style="margin: auto;">
                <div class="float-btn" style="display: flex;">
                  <a href="/student/<%=batchDetails.presentLeader.regNumber%>/profile">
                    <%if(checkData.isPresentLeader){%>
                      <div class="btn btn-warning btn-sm mr-1">Your profile</div>
                    <%}else{%>
                      <div class="btn btn-primary btn-sm mr-1">View profile</div>
                    <%}%>
                  </a>
                </div>
              </div>
            </div>
          </div>
        <%}else{%>
          <div class="btn btn-lg btn-block btn-info">There is no present leader available!!</div>
        <%}%>
        </div>
      
        <hr>
        <div class="ml-2 mr-2 mb-1">
          <h5><strong>Previous Leader :</strong></h5>
          <%if(batchDetails.previousLeader){%>
          <div class="student-room-container" style="display: flex;width: 100%;">
            <div class="mr-2" >
              <img class="avatar-small" style="top:2px ;margin-left: 0rem;margin-right: 2px;" src="" alt="">
            </div>
            <div class="row"  style="width: 100%;">
              <div class="col-sm-6"  style="width: 100%;display: flex;">
                <div style="width: 100%;">
                  <strong class="d-block">Name : <%=batchDetails.previousLeader.userName%></strong>
                  <strong class="d-block">Phone :  <%=batchDetails.previousLeader.phone%></strong>
                  <a href="/leader-voting/<%=batchDetails.previousLeader.votingPoleId%>/details">
                    <strong>Go to voting details...</strong>
                  </a>
                </div>
              </div>
              <div class="col-sm-6 " style="margin: auto;">
                <div class="float-btn" style="display: flex;">
                  <a href="/student/<%=batchDetails.previousLeader.regNumber%>/profile">
                    <%if(checkData.isPreviousLeader){%>
                      <div class="btn btn-warning btn-sm mr-1">Your profile</div>
                    <%}else{%>
                      <div class="btn btn-primary btn-sm mr-1">View profile</div>
                    <%}%>
                  </a>
                </div>
              </div>
            </div>
          </div>
          <%}else{%>
            <div class="btn btn-lg btn-block btn-info">There is no previous leader available!!</div>
          <%}%>
        </div>

        <hr>
        <div class="ml-2 mr-2 mb-1">
          <h5><strong>All Leaders :</strong></h5>
          <%if(!batchDetails.allLeaders.length){%>
            <div class="btn btn-lg btn-block btn-info">There is no leader available!!</div>
          <%}else{%>
            <%batchDetails.allLeaders.forEach((leader)=>{%>
              <div class="student-room-container" style="display: flex;width: 100%;">
                <div class="mr-2" >
                  <img class="avatar-small" style="top:2px ;margin-left: 0rem;margin-right: 2px;" src="" alt="">
                </div>
                <div class="row"  style="width: 100%;">
                  <div class="col-sm-6"  style="width: 100%;display: flex;">
                    <div style="width: 100%;">
                      <strong class="d-block">Name : <%=leader.userName%></strong>
                      <%if(checkData.isBatchMember){%>
                        <strong class="d-block">Phone : <%=leader.phone%></strong>
                      <%}%>
                    </div>
                  </div>
                  <div class="col-sm-6 " style="margin: auto;">
                    <div class="float-btn" style="display: flex;">
                      <a href="/student/<%=leader.regNumber%>/profile">
                        <%if(user.regNumber==leader.regNumber){%>
                          <div class="btn btn-warning btn-sm mr-1">Your profile</div>
                        <%}else{%>
                          <div class="btn btn-primary btn-sm mr-1">View profile</div>
                        <%}%>
                      </a>
                    </div>
                  </div>
                </div>              
              </div>
            <%})%>
          <%}%>
        </div>

        <hr>
        <div class="ml-2 mr-2 mb-1">
          <h5><strong>All Members :</strong></h5>
          <%if(!batchDetails.allMembers.length){%>
            <div class="btn btn-lg btn-block btn-info">There is no member available!!</div>
          <%}else{%>
            <%batchDetails.allMembers.forEach((member)=>{%>
              <div class="student-room-container" style="display: flex;width: 100%;">
                <div class="mr-2" >
                  <img class="avatar-small" style="top:2px ;margin-left: 0rem;margin-right: 2px;" src="" alt="">
                </div>
                <div class="row"  style="width: 100%;">
                  <div class="col-sm-6"  style="width: 100%;display: flex;">
                    <div style="width: 100%;">
                      <strong class="d-block">Name : <%=member.userName%></strong>
                      <%if(checkData.isBatchMember){%>
                        <strong class="d-block">Phone : <%=member.phone%></strong>
                      <%}%>
                    </div>
                  </div>
                  <div class="col-sm-6 " style="margin: auto;">
                    <div class="float-btn" style="display: flex;">
                      <a href="/student/<%=member.regNumber%>/profile">
                        <%if(user.regNumber==member.regNumber){%>
                          <div class="btn btn-warning btn-sm mr-1">Your profile</div>
                        <%}else{%>
                          <div class="btn btn-primary btn-sm mr-1">View profile</div>
                        <%}%>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            <%})%>
          <%}%>
        </div>

        <%if(checkData.isBatchLeader){%>
        <hr>
        <div class="ml-2 mr-2 mb-1">
          <h5><strong>All New Membership Requests :</strong></h5>
          <%if(!batchDetails.newMemberRequests.length){%>
            <div class="btn btn-lg btn-block btn-info">There is no member available!!</div>
          <%}else{%>
            <%batchDetails.newMemberRequests.forEach((member)=>{%>
              <div class="student-room-container" style="display: flex;width: 100%;">
                <div class="mr-2" >
                  <img class="avatar-small" style="top:2px ;margin-left: 0rem;margin-right: 2px;" src="" alt="">
                </div>
                <div class="row"  style="width: 100%;">
                  <div class="col-sm-6"  style="width: 100%;display: flex;">
                    <div style="width: 100%;">
                      <strong class="d-block">Name : <%=member.userName%></strong>
                      <%if(checkData.isBatchMember){%>
                        <strong class="d-block">Phone : <%=member.phone%></strong>
                      <%}%>
                    </div>
                  </div>
                  <div class="col-sm-6 " style="margin: auto;">
                    <div class="float-btn" style="display: flex;">
                      <a href="/verification/case3/<%=member.regNumber%>/page">
                        <div class="btn btn-primary btn-sm mr-1">Verify Account</div>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            <%})%>
          <%}%>
        </div>
      <%}%>

        </div>
      </div>

    </div>
  <div class="col-lg"></div>
</div>



<%- include('includes/footer') %>

















